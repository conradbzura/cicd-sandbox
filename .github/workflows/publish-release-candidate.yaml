name: Build and publish a release candidate

on:
  push:
    tags:
      - 'v*rc*'

jobs:
  go:
    permissions:
      contents: write
      id-token: write
    uses: ./.github/workflows/publish-release.yaml
    with:
      version: ${{ github.ref }}
      prerelease: true
    secrets:
      token: ${{ secrets.MY_TOKEN }}
